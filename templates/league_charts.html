{% extends "header.html" %}
{% block title %}{{ org }} {{ lg }}{% endblock %}
{% block standings %}"/standings/{{ org }}/{{ lg }}/{{ maxYear }}"{% endblock %}
{% block champions %}"/{{ org }}/{{ lg }}/champions"{% endblock %}
{% block hitting_stats %}{{ org }}/{{ lg }}/league/{{ max_yr }}{% endblock %}
{% block pitching_stats %}{{ org }}/{{ lg }}/league/{{ max_yr }}{% endblock %}
{% block h_records_season %}{{ org }}/{{ lg }}{% endblock %}
{% block h_records_career %}{{ org }}/{{ lg }}{% endblock %}
{% block p_records_season %}{{ org }}/{{ lg }}{% endblock %}
{% block p_records_career %}{{ org }}/{{ lg }}{% endblock %}

{% block content %}
<script>
    let org = '{{org}}';
    let lg = '{{lg}}';

    function updatePlayerCareerComparisonChart(){
        let stat = $("#select-stat-list").val()
        
        $.ajax({
            url: `/{{org}}/{{lg}}/charts/player_comparison/${stat}`,
            type: 'GET',
            success: function(response){
                console.log(response)
                Plotly.newPlot('chart', JSON.parse(response));
            }
        })
    }

    function updateAgingCurve(stat){
        $.ajax({
            url: `/{{org}}/{{lg}}/charts/aging_curve/${stat}`,
            type: 'GET',
            success: function(response){
                console.log(response)
                Plotly.newPlot('aging_curve', JSON.parse(response));
            }
        })  
    }
</script>

<div class="row mt-3">
    <div class="col">
        Use dropdown to change chart<br>
        <select id="select-stat-list">
            {% for stat in statList %}
            <option value="{{stat}}">{{stat}}</option>
            {% endfor %}
        </select>
        <br>
    </div>
</div>
<div class="row mt-3">
    <div class="col">
        <div id="chart"></div>
    </div>
</div>
<div class="row mt-3">
    <div class="col">
        Use dropdown to change chart<br>
        <select id="select-stat-list-2">
            {% for stat in ['BA', 'OBP', 'SLG', 'OPS'] %}
            <option value="{{stat}}">{{stat}}</option>
            {% endfor %}
        </select>
        <br>
    </div>
</div>
<div class="row mt-3">
    <div class="col">
        <div id="aging_curve"></div>
    </div>
</div>


<script>
    $("#select-stat-list").on('change', function(){
        updatePlayerCareerComparisonChart()
    })  
    $("#select-stat-list-2").on('change', function(){
        console.log(this.value)
        updateAgingCurve(this.value)
    })  
</script>
{% endblock %}