<html>
    <head>
	    <meta charset="UTF-8">
        <meta name="author" content="Daniel Haueter">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="{{ url_for('static', path='/bootstrap.min.css') }}" rel="stylesheet">
        <link rel="icon" type="image/x-icon" href="/static/images/favicon.ico">
        <title>Draft Room</title>
        <meta content="text/html; charset=windows-1252" http-equiv="Content-Type">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
        <script src="/static/sort-table.js"></script>
        <script>
            $(document).ready(function(){
                $("#projected_stats_table tr").hide();
                $("#projected_stats_table tr:first").show();
                $("input[name='playerid']").on('focusout', function(e){
                    var selected = $(this).val();
                    $("#projected_stats_table tr").hide();
                    $("#projected_stats_table tr:first").show();
                    $("#"+selected).show();
                });
                $('#player_list').change(function(){
                    var v = $("#player_list").val();
                    $("#projected_stats_table tr").hide();
                    $("#projected_stats_table tr:first").show();
                    $("#"+v).show();
                });
                $("#button").click(function(){
                    var v = $("#player_list").val();
                    $.get("/fantasy/draft/"+v, function(data, status){
                        alert("Data: " + data + "\nStatus: " + status);
                    });
                }); 
            })
        </script>
    </head>
    <body>
        <div class="row">
            <div class="col-md-3">
                <form action="/fantasy/draft/update_bid" method="get">
                    <input id="player_select" list="player_list" name="playerid">
                    <datalist id="player_list">
                        {% for i, row in hitters.iterrows() %}
                            <option value="{{ row['playerid'] }}">{{ row['Name'] }}</option>
                        {% endfor %}
                    </datalist>
                    <br><br>
                    <table>
                        <tr>
                            <td>
                                <input type="radio" id="team1" name="owner" value="Avg Joes">
                                <label for="team1">Avg Joes</label>
                            </td>
                            <td>
                                <input type="radio" id="team2" name="owner" value="Brewbirds">
                                <label for="team2">Brewbirds</label>
                            </td>
                            <td>
                                <input type="radio" id="team3" name="owner" value="Charmer">
                                <label for="team3">Charmer</label>
                            </td>
                            <td>
                                <input type="radio" id="team4" name="owner" value="Dirty Birds">
                                <label for="team4">Dirty Birds</label>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <input type="radio" id="team5" name="owner" value="Harvey">
                                <label for="team5">Harvey</label>
                            </td>
                            <td>
                                <input type="radio" id="team6" name="owner" value="Lil Trump">
                                <label for="team6">Lil Trump</label>
                            </td>
                            <td>
                                <input type="radio" id="team7" name="owner" value="Lima Time">
                                <label for="team7">Lima Time</label>
                            </td>
                            <td>
                                <input type="radio" id="team8" name="owner" value="Midnight">
                                <label for="team8">Midnight</label>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <input type="radio" id="team9" name="owner" value="Moms Cookin">
                                <label for="team9">Mother</label>
                            </td>
                            <td>
                                <input type="radio" id="team10" name="owner" value="Roid Ragers">
                                <label for="team10">Roiders</label>
                            </td>
                            <td>
                                <input type="radio" id="team11" name="owner" value="Trouble">
                                <label for="team11">Trouble</label>
                            </td>
                            <td>
                                <input type="radio" id="team12" name="owner" value="Wu-Tang">
                                <label for="team12">Wu-Tang</label>
                            </td>
                        </tr>
                    </table>
                    <br>
                    <label for="price">Auction Price</label>
                    <input type="text" name="price" id="price_entry" size="2" placeholder="Price" value=1>
                    <button id="button">Record Bid</button>
                    <button id="update_bid">Update Bid</button>
                    <a href="/fantasy/draft/reset_all">Reset</a>
                </form>
            </div>
            <div class='col-md-6'>
                <table class='table' id="projected_stats_table">
                    <thead>
                        <th>#</th>
                        <th>Name</th>
                        <th>PA</th>
                        <th>BA</th>
                        <th>HR</th>
                        <th>R</th>
                        <th>RBI</th>
                        <th>SB</th>
                        <th>$</th>
                        <th>Z</th>
                    </thead>
                    {% for i, row in hitters.iterrows() %}
                        <tr id="{{ row['playerid'] }}">
                            <td>{{ row['playerid'] }}</td>
                            <td>{{ row['Name'] }}</td>
                            <td>{{ row['PA'] }}</td>
                            <td>{{ row['AVG'] }}</td>
                            <td>{{ row['HR'] }}</td>
                            <td>{{ row['R'] }}</td>
                            <td>{{ row['RBI'] }}</td>
                            <td>{{ row['SB'] }}</td>
                            <td>{{ row['Dollars'] }}</td>
                            <td>{{ row['z'] }}</td>
                        </tr>
                    {% endfor %}
                </table>
            </div>
            <div class="col-md-3">
                {% for i, row in owned.iterrows() %}
                    {% if row['Owner']=='Lima Time' %}
                        {{ row['Primary_Pos'] }}: {{ row['Name'] }} - ${{ row['Paid'] }}<br>
                    {% endif %}
                {% endfor %}
            </div>
        </div>
        <div class="row" style="height:320px;">
            <div class="col-md-3" style="height:320px; overflow-y:scroll;">
                <h3>Draft Order</h3>
                <table style="width:100%">
                    {% for i, row in owned.sort_values('Timestamp', ascending=False).iterrows() %}
                    <tr>
                        <td>{{ row['Name'] }}</td>
                        <td>${{ row['Paid'] }}</td>
                        <td>{{ row['Owner'] }}</td>
                    </tr>
                    {% endfor %}
                </table>
                
            </div>
            <div class="col-md-6">
                <table class="table table-condensed table-hover">
                    <thead>
                        <th>Owner</th>
                        <th>$ Left</th>
                        <th>Z Value</th>
                        <th>$/Unit</th>
                        <th>Count</th>
                        <th>BA</th>
                        <th>HR</th>
                        <th>R</th>
                        <th>RBI</th>
                        <th>SB</th>
                        <th>Pts</th>
                        <th>Rank</th>
                    </thead>
                {% for i, row in owners_df.iterrows() %}
                    <tr>
                        <td>{{ row['Owner'] }}</td>
                        <td>{{ row['$ Left'] }}</td>
                        <td>{{ row['z'] }}</td>
                        <td>{{ row['$/unit'] }}</td>
                        <td>{{ row['Drafted'] }}</td>
                        <td>{{ row['BA'] }}</td>
                        <td>{{ row['HR'] }}</td>
                        <td>{{ row['R'] }}</td>
                        <td>{{ row['RBI'] }}</td>
                        <td>{{ row['SB'] }}</td>
                        <td>{{ row['Pts'] }}</td>
                        <td>{{ row['Rank'] }}</td>
                    </tr>
                {% endfor %}
            </div>
        </div>
    </body>
</html>
